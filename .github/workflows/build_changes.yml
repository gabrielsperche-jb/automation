name: Build Changes

on:
  [push]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v2

      - name: Identify module
        id: find-module
        run: |
          while read p; do
            module_path=$(echo $p | grep -Eo 'modules/[^/]+')
            if [ ! -z "$module_path" ]; then
              module_name=$(echo $module_path | cut -d/ -f2)
              echo "Module changed: $module_name"
            fi
          done <<< $(git diff --name-only origin/${{ github.event.pull_request.base.ref }}...${{ github.event.pull_request.head.ref }})
          shell: bash

      - name: Environment Configuration
        uses: actions/setup-java@v1
        with:
          java-version: '8.0.192'
          java-package: jdk
          architecture: x64
